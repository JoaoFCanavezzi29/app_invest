
{"openapi":"3.0.0","info":{"title":"Minha API Exemplo","version":"1.0.0","description":"Documentação da API usando Swagger"},"servers":[{"url":"http://localhost:3000"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"User":{"type":"object","properties":{"id":{"type":"integer","example":1},"username":{"type":"string","example":"jogador1"},"email":{"type":"string","example":"email@dominio.com"},"password_hash":{"type":"string","example":"$2b$10$..."},"role":{"type":"string","example":"player"},"player":{"$ref":"#/components/schemas/Player"}}},"Player":{"type":"object","properties":{"id":{"type":"integer","example":1},"value":{"type":"integer","example":800000}}},"Asset":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Cristal Raro"},"type":{"type":"string","example":"gema"},"liquidity":{"type":"integer","example":15000},"base_sale_time":{"type":"integer","example":3},"slippage":{"type":"number","format":"float","example":0.25},"current_value":{"type":"number","format":"float","example":125000}}},"PlayerAsset":{"type":"object","properties":{"id":{"type":"integer","example":1},"player_id":{"type":"integer","example":1},"asset_id":{"type":"integer","example":3},"amount":{"type":"integer","example":500},"purchase_date":{"type":"string","format":"date-time","example":"2025-05-04T14:30:00Z"},"asset":{"$ref":"#/components/schemas/Asset"},"player":{"$ref":"#/components/schemas/Player"}}},"Round":{"type":"object","properties":{"id":{"type":"integer","example":1},"player_id":{"type":"integer","example":1},"round_id":{"type":"integer","example":12},"purchases":{"type":"integer","example":1},"sales":{"type":"integer","example":2},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"RoundResult":{"type":"object","properties":{"id":{"type":"integer","example":5},"player_id":{"type":"integer","example":1},"value":{"type":"number","format":"float","example":985400.75},"round":{"type":"integer","example":10},"events_occurred":{"type":"string","example":"Mercado de Gema oscilou 7%, Player recebeu bônus de missão"},"round_date":{"type":"string","format":"date-time","example":"2025-05-04T18:00:00Z"}}},"CurrentRound":{"type":"object","properties":{"id":{"type":"integer","example":1},"player_id":{"type":"integer","example":1},"round_id":{"type":"integer","example":101},"round_number":{"type":"integer","example":7}}},"Event":{"type":"object","properties":{"id":{"type":"integer","example":1},"title":{"type":"string","example":"Crise energética global"},"description":{"type":"string","example":"A produção de energia mundial foi severamente afetada."},"start_date":{"type":"string","format":"date-time","example":"2025-05-04T00:00:00Z"},"end_date":{"type":"string","format":"date-time","example":"2025-05-10T00:00:00Z"}}},"EventAssetImpact":{"type":"object","properties":{"id":{"type":"integer","example":1},"event_id":{"type":"integer","example":1},"asset_id":{"type":"integer","example":2},"impact":{"type":"number","format":"float","example":-0.25}}},"SaleQueue":{"type":"object","properties":{"id":{"type":"integer","example":1},"player_id":{"type":"integer","example":1},"asset_id":{"type":"integer","example":2},"amount":{"type":"integer","example":5},"rounds_remaining":{"type":"integer","example":3},"createdAt":{"type":"string","format":"date-time","example":"2025-05-04T00:00:00Z"},"updatedAt":{"type":"string","format":"date-time","example":"2025-05-04T01:00:00Z"}}}}},"security":[{"bearerAuth":[]}],"paths":{"/api/assets/player-assets":{"get":{"summary":"Retorna todos os ativos de um jogador","description":"Recupera uma lista de ativos de um jogador com base no seu ID.","tags":["Ativos"],"responses":{"200":{"description":"Lista de ativos do jogador.","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"player_id":{"type":"integer","description":"ID do jogador."},"asset_id":{"type":"integer","description":"ID do ativo."},"amount":{"type":"integer","description":"Quantidade do ativo do jogador."}}}}}}},"500":{"description":"Erro ao buscar ativos do jogador."}}}},"/api/assets/player-assets/purchase":{"post":{"summary":"Compra um ativo para o jogador","description":"Registra a compra de um ativo para o jogador.","tags":["Ativos"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"asset_id":{"type":"integer","description":"ID do ativo a ser comprado."},"amount":{"type":"integer","description":"Quantidade do ativo a ser comprada."}}}}}},"responses":{"201":{"description":"Compra realizada com sucesso."},"400":{"description":"Erro na compra (por exemplo, saldo insuficiente ou limite de ações)."},"500":{"description":"Erro ao realizar compra."}}}},"/api/assets/player-assets/sell":{"post":{"summary":"Vende um ativo do jogador","description":"Registra a venda de um ativo do jogador.","tags":["Ativos"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"asset_id":{"type":"integer","description":"ID do ativo a ser vendido."},"amount":{"type":"integer","description":"Quantidade do ativo a ser vendido."}}}}}},"responses":{"200":{"description":"Venda realizada com sucesso."},"400":{"description":"Erro na venda (por exemplo, quantidade insuficiente de ativos)."},"500":{"description":"Erro ao realizar venda."}}}},"/api/assets":{"get":{"summary":"Retorna todos os ativos","description":"Recupera uma lista de todos os ativos cadastrados no sistema.","tags":["Ativos"],"responses":{"200":{"description":"Lista de ativos.","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer","description":"ID do ativo."},"name":{"type":"string","description":"Nome do ativo."},"type":{"type":"string","description":"Tipo do ativo."},"liquidity":{"type":"number","description":"Liquidez do ativo."},"current_value":{"type":"number","description":"Valor atual do ativo."},"slippage":{"type":"number","description":"Percentual de variação do ativo."},"base_sale_time":{"type":"integer","description":"Tempo base de venda do ativo."}}}}}}},"500":{"description":"Erro ao buscar ativos."}}},"post":{"summary":"Registra um novo ativo","description":"Cria um novo ativo no sistema.","tags":["Ativos"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Nome do ativo."},"type":{"type":"string","description":"Tipo do ativo."},"liquidity":{"type":"number","description":"Liquidez do ativo."},"base_sale_time":{"type":"integer","description":"Tempo base de venda do ativo."},"slippage":{"type":"number","description":"Percentual de variação do ativo."},"current_value":{"type":"number","description":"Valor atual do ativo."}}}}}},"responses":{"201":{"description":"Ativo registrado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer","description":"ID do ativo."},"name":{"type":"string","description":"Nome do ativo."},"type":{"type":"string","description":"Tipo do ativo."},"liquidity":{"type":"number","description":"Liquidez do ativo."},"current_value":{"type":"number","description":"Valor atual do ativo."},"slippage":{"type":"number","description":"Percentual de variação do ativo."},"base_sale_time":{"type":"integer","description":"Tempo base de venda do ativo."}}}}}},"500":{"description":"Erro ao registrar ativo."}}}},"/api/assets/{id}":{"get":{"summary":"Retorna um ativo específico","description":"Recupera um ativo baseado no seu ID.","tags":["Ativos"],"parameters":[{"in":"path","name":"id","required":true,"description":"ID do ativo.","schema":{"type":"integer"}}],"responses":{"200":{"description":"Ativo encontrado.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer","description":"ID do ativo."},"name":{"type":"string","description":"Nome do ativo."},"type":{"type":"string","description":"Tipo do ativo."},"liquidity":{"type":"number","description":"Liquidez do ativo."},"current_value":{"type":"number","description":"Valor atual do ativo."},"slippage":{"type":"number","description":"Percentual de variação do ativo."},"base_sale_time":{"type":"integer","description":"Tempo base de venda do ativo."}}}}}},"404":{"description":"Ativo não encontrado."},"500":{"description":"Erro ao buscar ativo."}}},"put":{"summary":"Atualiza um ativo específico","description":"Atualiza as informações de um ativo baseado no seu ID.","tags":["Ativos"],"parameters":[{"in":"path","name":"id","required":true,"description":"ID do ativo.","schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Nome do ativo."},"type":{"type":"string","description":"Tipo do ativo."},"liquidity":{"type":"number","description":"Liquidez do ativo."},"base_sale_time":{"type":"integer","description":"Tempo base de venda do ativo."},"slippage":{"type":"number","description":"Percentual de variação do ativo."},"current_value":{"type":"number","description":"Valor atual do ativo."}}}}}},"responses":{"200":{"description":"Ativo atualizado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"integer","description":"ID do ativo."},"name":{"type":"string","description":"Nome do ativo."},"type":{"type":"string","description":"Tipo do ativo."},"liquidity":{"type":"number","description":"Liquidez do ativo."},"current_value":{"type":"number","description":"Valor atual do ativo."},"slippage":{"type":"number","description":"Percentual de variação do ativo."},"base_sale_time":{"type":"integer","description":"Tempo base de venda do ativo."}}}}}},"404":{"description":"Ativo não encontrado."},"500":{"description":"Erro ao atualizar ativo."}}},"delete":{"summary":"Apaga um ativo específico","description":"Apaga um ativo baseado no seu ID.","tags":["Ativos"],"parameters":[{"in":"path","name":"id","required":true,"description":"ID do ativo.","schema":{"type":"integer"}}],"responses":{"204":{"description":"Ativo apagado com sucesso."},"404":{"description":"Ativo não encontrado."},"500":{"description":"Erro ao apagar ativo."}}}},"/api/auth/register":{"post":{"summary":"Registra um novo usuário","tags":["Autenticação"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","email","password"],"properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"201":{"description":"Usuário registrado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"email":{"type":"string"}}}}}}}},"400":{"description":"Erro nos dados fornecidos"},"500":{"description":"Erro interno ao registrar"}}}},"/api/auth/login":{"post":{"summary":"Realiza o login do usuário","description":"Autentica um usuário no sistema e gera um token de autenticação.","tags":["Autenticação"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","description":"E-mail do usuário."},"password":{"type":"string","description":"Senha do usuário."}}}}}},"responses":{"200":{"description":"Login bem-sucedido. Retorna o token de autenticação.","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string","description":"Token JWT gerado para autenticação."},"userId":{"type":"integer","description":"ID do usuário autenticado."}}}}}},"401":{"description":"Credenciais inválidas. O login falhou."},"500":{"description":"Erro interno ao tentar autenticar o usuário."}}}},"/api/events/{id}/impact":{"put":{"summary":"Define ou atualiza o impacto do evento sobre um ativo","tags":["Eventos"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID do evento"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["assetId","impact"],"properties":{"assetId":{"type":"integer"},"impact":{"type":"number","format":"float","minimum":-0.99,"maximum":0.99}}}}}},"responses":{"200":{"description":"Impacto definido com sucesso"},"404":{"description":"Evento ou ativo não encontrado"},"500":{"description":"Erro ao definir impacto"}}}},"/api/events":{"post":{"summary":"Cria um novo evento","tags":["Eventos"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}}}}},"responses":{"201":{"description":"Evento criado com sucesso"},"500":{"description":"Erro ao criar evento"}}},"get":{"summary":"Lista todos os eventos","tags":["Eventos"],"responses":{"200":{"description":"Lista de eventos"},"500":{"description":"Erro ao buscar eventos"}}}},"/api/events/{id}":{"get":{"summary":"Busca um evento pelo ID","tags":["Eventos"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID do evento"}],"responses":{"200":{"description":"Detalhes do evento"},"404":{"description":"Evento não encontrado"},"500":{"description":"Erro ao buscar evento"}}},"put":{"summary":"Atualiza um evento pelo ID","tags":["Eventos"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID do evento"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}}}}},"responses":{"200":{"description":"Evento atualizado com sucesso"},"404":{"description":"Evento não encontrado"},"500":{"description":"Erro ao editar evento"}}},"delete":{"summary":"Remove um evento pelo ID","tags":["Eventos"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID do evento"}],"responses":{"204":{"description":"Evento removido com sucesso"},"404":{"description":"Evento não encontrado"},"500":{"description":"Erro ao apagar evento"}}}},"/api/player":{"get":{"summary":"Retorna todos os usuários e dados dos jogadores.","tags":["Player"],"responses":{"200":{"description":"Lista de jogadores","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"500":{"description":"Erro interno do servidor"}}}},"/api/player/{id}":{"get":{"summary":"Retorna um usuário e dados do jogador pelo ID.","tags":["Player"],"parameters":[{"in":"path","name":"id","required":true,"description":"ID do jogador","schema":{"type":"integer"}}],"responses":{"200":{"description":"Dados do jogador encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"Usuário não encontrado"},"500":{"description":"Erro interno do servidor"}}},"put":{"summary":"Atualiza informações do jogador (role e value).","tags":["Player"],"parameters":[{"in":"path","name":"id","required":true,"description":"ID do jogador","schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"role":{"type":"string"},"value":{"type":"integer"}}}}}},"responses":{"200":{"description":"Usuário e jogador atualizados com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Requisição mal formada"},"404":{"description":"Usuário não encontrado"},"500":{"description":"Erro interno do servidor"}}},"delete":{"summary":"Deleta um usuário e o jogador associado.","tags":["Player"],"parameters":[{"in":"path","name":"id","required":true,"description":"ID do jogador","schema":{"type":"integer"}}],"responses":{"204":{"description":"Usuário e jogador deletados com sucesso"},"403":{"description":"Acesso negado (apenas para admins)"},"404":{"description":"Usuário não encontrado"},"500":{"description":"Erro interno do servidor"}}}},"/api/player/{id}/password":{"patch":{"summary":"Altera a senha do usuário.","tags":["Player"],"parameters":[{"in":"path","name":"id","required":true,"description":"ID do jogador","schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","description":"Nova senha do usuário"}}}}}},"responses":{"200":{"description":"Senha alterada com sucesso"},"400":{"description":"Senha não fornecida"},"403":{"description":"Acesso negado (apenas para o próprio usuário ou admin)"},"404":{"description":"Usuário não encontrado"},"500":{"description":"Erro interno do servidor"}}}}},"tags":[{"name":"Ativos","description":"Operações relacionadas a Ativos."},{"name":"Autenticação","description":"Operações de registro e login para autenticação de usuários"},{"name":"Eventos","description":"Endpoints de gerenciamento de eventos"},{"name":"Player","description":"API para manipulação de jogadores e usuários."}]}